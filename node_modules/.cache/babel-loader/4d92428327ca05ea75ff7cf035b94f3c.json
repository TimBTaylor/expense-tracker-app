{"ast":null,"code":"var _jsxFileName = \"/Users/timtaylor/Documents/expense-tracker-app-main/client/src/components/Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Header } from \"./Header\";\nimport { Balance } from \"./Balance\";\nimport { IncomeExpenses } from \"./IncomeExpenses\";\nimport { TransactionList } from \"./TransactionList\";\nimport { AddTransaction } from \"./AddTransaction\";\nimport { GlobalProvider } from \"../context/GlobalState\";\nimport { ProfileView } from \"./ProfileView\";\nimport axios from \"axios\";\nimport * as ReactBootStrap from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Main = () => {\n  _s();\n\n  const [loggedin, setLoggedIn] = useState(false);\n  const [incorrectRegister, setIncorrectRegister] = useState(false);\n  const [incorrectLogin, setIncorrectLogin] = useState(false);\n  const [username, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [usersData, setUsersData] = useState([]);\n  const [nameTaken, setNameTaken] = useState(false);\n  const [profile, setProfile] = useState(false);\n  useEffect(() => {\n    async function getData() {\n      await axios.get(\"https://expensetrackerbytim.herokuapp.com/expensetracker/allusers\").then(res => {\n        setUsersData(res.data);\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n\n    getData();\n  }, []);\n\n  const createUser = async e => {\n    e.preventDefault();\n\n    if (username.length > 1 && password.length > 1) {\n      const usernames = usersData.map(user => {\n        return user.username;\n      });\n      const isTaken = usernames.filter(takenUsernames => {\n        return takenUsernames === username;\n      });\n\n      if (isTaken.length > 0) {\n        setNameTaken(true);\n      } else {\n        await axios.post(\"https://expensetrackerbytim.herokuapp.com/expensetracker/user\", {\n          name: `${username}`,\n          password: `${password}`\n        }).then(res => {\n          console.log(res);\n          setLoggedIn(true);\n          localStorage.setItem(\"username\", res.data.username);\n          localStorage.setItem(\"id\", res.data._id);\n        }).catch(err => {\n          console.error(err);\n        });\n      }\n    } else {\n      setIncorrectLogin(false);\n      setIncorrectRegister(true);\n    }\n  };\n\n  const logIn = async e => {\n    e.preventDefault();\n\n    if (username.length > 1 && password.length > 1) {\n      //returns array of all usernames\n      const users = usersData.map(user => {\n        return user.username;\n      }); //returns array of all passwords\n\n      const usersPasswords = usersData.map(user => {\n        return user.password;\n      });\n      const usernameIndex = users.indexOf(username);\n      const passwordIndex = usersPasswords.indexOf(password);\n\n      if (usernameIndex !== passwordIndex || usernameIndex < 0 || passwordIndex < 0) {\n        setIncorrectRegister(false);\n        setIncorrectLogin(true);\n        return console.log(\"log in failed\");\n      }\n\n      if (usernameIndex === passwordIndex) {\n        setLoggedIn(true);\n        console.log(\"log in successful\");\n      }\n\n      localStorage.setItem(\"username\", usersData[usernameIndex].username);\n      localStorage.setItem(\"password\", usersData[passwordIndex].password);\n      localStorage.setItem(\"id\", usersData[usernameIndex]._id);\n    } else {\n      setIncorrectRegister(false);\n      setIncorrectLogin(true);\n    }\n  };\n\n  const usernameUsed = nameTaken ? /*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"username-taken\",\n    children: \"Username is already taken\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n  const registrationFail = incorrectRegister ? /*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"too-short\",\n    children: \"Username and password must be 1 character or more\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n  const logInFail = incorrectLogin ? /*#__PURE__*/_jsxDEV(\"h1\", {\n    className: \"incorrect-info\",\n    children: \"Incorrect username and password combination\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n\n  const goToProfile = () => {\n    setProfile(true);\n  };\n\n  const goToHome = () => {\n    setProfile(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loggedin ? /*#__PURE__*/_jsxDEV(GlobalProvider, {\n      children: [/*#__PURE__*/_jsxDEV(ReactBootStrap.Navbar, {\n        collapseOnSelect: true,\n        expand: \"md\",\n        variant: \"light\",\n        className: \"navbar\",\n        children: /*#__PURE__*/_jsxDEV(ReactBootStrap.Container, {\n          children: [/*#__PURE__*/_jsxDEV(ReactBootStrap.Navbar.Brand, {\n            href: \"#home\",\n            children: \"Expense Tracker\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ReactBootStrap.Navbar.Toggle, {\n            \"aria-controls\": \"responsive-navbar-nav\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ReactBootStrap.Navbar.Collapse, {\n            id: \"responsive-navbar-nav\",\n            children: /*#__PURE__*/_jsxDEV(ReactBootStrap.Nav, {\n              className: \"me-auto\",\n              children: [/*#__PURE__*/_jsxDEV(ReactBootStrap.Nav.Link, {\n                className: \"nav-link\",\n                onClick: goToHome,\n                href: \"#\",\n                children: \"Home\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ReactBootStrap.Nav.Link, {\n                className: \"nav-link\",\n                onClick: goToProfile,\n                href: \"#\",\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ReactBootStrap.Nav.Link, {\n                target: \"_blank\",\n                className: \"nav-link\",\n                href: \"https://github.com/TimBTaylor/expense-tracker-app\",\n                children: \"See Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ReactBootStrap.Nav.Link, {\n                target: \"_blank\",\n                className: \"nav-link\",\n                href: \"https://timbtaylor.github.io/personal-portfolio/projects.html\",\n                children: \"Portfolio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this), profile ? /*#__PURE__*/_jsxDEV(ProfileView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Balance, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(IncomeExpenses, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(AddTransaction, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(TransactionList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Welcome to Exepense Tracker by Tim\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"portfolio-code\",\n        children: [\"You can visit my protfolio\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://timbtaylor.github.io/personal-portfolio/\",\n            children: \"here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), \"as well as the code for this project\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://github.com/TimBTaylor/expense-tracker-app\",\n            children: \"here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-warnings\",\n        children: [usernameUsed, registrationFail, logInFail]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"username\",\n          onChange: e => setUserName(e.target.value),\n          placeholder: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"password\",\n          onChange: e => setPassword(e.target.value),\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: createUser,\n          children: \"Create User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logIn,\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Main, \"4YpqbCmE+ocPkIRibhr2EIQpbHg=\");\n\n_c = Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/Users/timtaylor/Documents/expense-tracker-app-main/client/src/components/Main.js"],"names":["React","useState","useEffect","Header","Balance","IncomeExpenses","TransactionList","AddTransaction","GlobalProvider","ProfileView","axios","ReactBootStrap","Main","loggedin","setLoggedIn","incorrectRegister","setIncorrectRegister","incorrectLogin","setIncorrectLogin","username","setUserName","password","setPassword","usersData","setUsersData","nameTaken","setNameTaken","profile","setProfile","getData","get","then","res","data","catch","err","console","error","createUser","e","preventDefault","length","usernames","map","user","isTaken","filter","takenUsernames","post","name","log","localStorage","setItem","_id","logIn","users","usersPasswords","usernameIndex","indexOf","passwordIndex","usernameUsed","registrationFail","logInFail","goToProfile","goToHome","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Header } from \"./Header\";\nimport { Balance } from \"./Balance\";\nimport { IncomeExpenses } from \"./IncomeExpenses\";\nimport { TransactionList } from \"./TransactionList\";\nimport { AddTransaction } from \"./AddTransaction\";\nimport { GlobalProvider } from \"../context/GlobalState\";\nimport { ProfileView } from \"./ProfileView\";\nimport axios from \"axios\";\nimport * as ReactBootStrap from \"react-bootstrap\";\n\nexport const Main = () => {\n  const [loggedin, setLoggedIn] = useState(false);\n  const [incorrectRegister, setIncorrectRegister] = useState(false);\n  const [incorrectLogin, setIncorrectLogin] = useState(false);\n  const [username, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [usersData, setUsersData] = useState([]);\n  const [nameTaken, setNameTaken] = useState(false);\n  const [profile, setProfile] = useState(false);\n\n  useEffect(() => {\n    async function getData() {\n      await axios\n        .get(\n          \"https://expensetrackerbytim.herokuapp.com/expensetracker/allusers\"\n        )\n        .then((res) => {\n          setUsersData(res.data);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n\n    getData();\n  }, []);\n\n  const createUser = async (e) => {\n    e.preventDefault();\n    if (username.length > 1 && password.length > 1) {\n      const usernames = usersData.map((user) => {\n        return user.username;\n      });\n      const isTaken = usernames.filter((takenUsernames) => {\n        return takenUsernames === username;\n      });\n\n      if (isTaken.length > 0) {\n        setNameTaken(true);\n      } else {\n        await axios\n          .post(\n            \"https://expensetrackerbytim.herokuapp.com/expensetracker/user\",\n            {\n              name: `${username}`,\n              password: `${password}`,\n            }\n          )\n          .then((res) => {\n            console.log(res);\n            setLoggedIn(true);\n            localStorage.setItem(\"username\", res.data.username);\n            localStorage.setItem(\"id\", res.data._id);\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      }\n    } else {\n      setIncorrectLogin(false);\n      setIncorrectRegister(true);\n    }\n  };\n\n  const logIn = async (e) => {\n    e.preventDefault();\n\n    if (username.length > 1 && password.length > 1) {\n      //returns array of all usernames\n      const users = usersData.map((user) => {\n        return user.username;\n      });\n      //returns array of all passwords\n      const usersPasswords = usersData.map((user) => {\n        return user.password;\n      });\n      const usernameIndex = users.indexOf(username);\n      const passwordIndex = usersPasswords.indexOf(password);\n      if (\n        usernameIndex !== passwordIndex ||\n        usernameIndex < 0 ||\n        passwordIndex < 0\n      ) {\n        setIncorrectRegister(false);\n        setIncorrectLogin(true);\n        return console.log(\"log in failed\");\n      }\n      if (usernameIndex === passwordIndex) {\n        setLoggedIn(true);\n        console.log(\"log in successful\");\n      }\n      localStorage.setItem(\"username\", usersData[usernameIndex].username);\n      localStorage.setItem(\"password\", usersData[passwordIndex].password);\n      localStorage.setItem(\"id\", usersData[usernameIndex]._id);\n    } else {\n      setIncorrectRegister(false);\n      setIncorrectLogin(true);\n    }\n  };\n\n  const usernameUsed = nameTaken ? (\n    <h1 className=\"username-taken\">Username is already taken</h1>\n  ) : (\n    <div></div>\n  );\n\n  const registrationFail = incorrectRegister ? (\n    <h1 className=\"too-short\">\n      Username and password must be 1 character or more\n    </h1>\n  ) : (\n    <div></div>\n  );\n\n  const logInFail = incorrectLogin ? (\n    <h1 className=\"incorrect-info\">\n      Incorrect username and password combination\n    </h1>\n  ) : (\n    <div></div>\n  );\n\n  const goToProfile = () => {\n    setProfile(true);\n  };\n\n  const goToHome = () => {\n    setProfile(false);\n  };\n\n  return (\n    <>\n      {loggedin ? (\n        <GlobalProvider>\n          <ReactBootStrap.Navbar\n            collapseOnSelect\n            expand=\"md\"\n            variant=\"light\"\n            className=\"navbar\"\n          >\n            <ReactBootStrap.Container>\n              <ReactBootStrap.Navbar.Brand href=\"#home\">\n                Expense Tracker\n              </ReactBootStrap.Navbar.Brand>\n              <ReactBootStrap.Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n              <ReactBootStrap.Navbar.Collapse id=\"responsive-navbar-nav\">\n                <ReactBootStrap.Nav className=\"me-auto\">\n                  <ReactBootStrap.Nav.Link\n                    className=\"nav-link\"\n                    onClick={goToHome}\n                    href=\"#\"\n                  >\n                    Home\n                  </ReactBootStrap.Nav.Link>\n                  <ReactBootStrap.Nav.Link\n                    className=\"nav-link\"\n                    onClick={goToProfile}\n                    href=\"#\"\n                  >\n                    Profile\n                  </ReactBootStrap.Nav.Link>\n                  <ReactBootStrap.Nav.Link\n                    target=\"_blank\"\n                    className=\"nav-link\"\n                    href=\"https://github.com/TimBTaylor/expense-tracker-app\"\n                  >\n                    See Code\n                  </ReactBootStrap.Nav.Link>\n                  <ReactBootStrap.Nav.Link\n                    target=\"_blank\"\n                    className=\"nav-link\"\n                    href=\"https://timbtaylor.github.io/personal-portfolio/projects.html\"\n                  >\n                    Portfolio\n                  </ReactBootStrap.Nav.Link>\n                </ReactBootStrap.Nav>\n              </ReactBootStrap.Navbar.Collapse>\n            </ReactBootStrap.Container>\n          </ReactBootStrap.Navbar>\n          {profile ? (\n            <ProfileView />\n          ) : (\n            <div className=\"container\">\n              <Header />\n              <Balance />\n              <IncomeExpenses />\n              <AddTransaction />\n              <TransactionList />\n            </div>\n          )}\n        </GlobalProvider>\n      ) : (\n        <div className=\"login\">\n          <div className=\"welcome\">\n            <h1>Welcome to Exepense Tracker by Tim</h1>\n          </div>\n          <h2 className=\"portfolio-code\">\n            You can visit my protfolio{\" \"}\n            <span>\n              <a href=\"https://timbtaylor.github.io/personal-portfolio/\">\n                here\n              </a>\n            </span>\n            <br />\n            as well as the code for this project{\" \"}\n            <span>\n              <a href=\"https://github.com/TimBTaylor/expense-tracker-app\">\n                here\n              </a>\n            </span>\n          </h2>\n          <div className=\"login-warnings\">\n            {usernameUsed}\n            {registrationFail}\n            {logInFail}\n          </div>\n          <div className=\"login-inputs\">\n            <input\n              className=\"username\"\n              onChange={(e) => setUserName(e.target.value)}\n              placeholder=\"Username\"\n            />\n            <br />\n            <input\n              className=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"Password\"\n            />\n            <br />\n            <button onClick={createUser}>Create User</button>\n            <button onClick={logIn}>Log in</button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}