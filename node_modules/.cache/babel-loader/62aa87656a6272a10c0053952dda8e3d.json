{"ast":null,"code":"import _regeneratorRuntime from\"/Users/timtaylor/Documents/expense-tracker-app-main/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/timtaylor/Documents/expense-tracker-app-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/timtaylor/Documents/expense-tracker-app-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useReducer}from\"react\";import{reducer}from\"./AppReducer\";import axios from\"axios\";//Initial State\nimport{jsx as _jsx}from\"react/jsx-runtime\";var initialState={transactions:[],error:null,loading:true};export var ACTIONS={DELETE_TRANSACTION:\"delete_transaction\",ADD_TRANSACTION:\"add_transaction\",GET_TRANSACTION:\"get_transaction\",ERROR_TRANSACTION:\"error_transaction\"};//Create  context\nexport var GlobalContext=/*#__PURE__*/createContext(initialState);//Provider component\nexport var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//Actions\nfunction getTransactions(_x){return _getTransactions.apply(this,arguments);}function _getTransactions(){_getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://expensetrackerbytim.herokuapp.com/expensetracker/\".concat(id));case 3:res=_context.sent;dispatch({type:ACTIONS.GET_TRANSACTION,payload:res.data.transaction});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:ACTIONS.ERROR_TRANSACTION,payload:_context.t0.res});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTransactions.apply(this,arguments);}function deleteTransaction(_x2){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(transactionDetails){var userId,id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:userId=localStorage.getItem(\"id\");id=transactionDetails.id;_context2.prev=2;_context2.next=5;return axios.delete(\"https://expensetrackerbytim.herokuapp.com/expensetracker/deletetransaction/\".concat(userId),{headers:{\"Content-Type\":\"application/json\"},data:{transaction:{id:transactionDetails.id,transactionAmount:\"\".concat(transactionDetails.transactionAmount),transactionType:\"\".concat(transactionDetails.transactionType),date:\"\".concat(transactionDetails.date),source:\"\".concat(transactionDetails.source)}}}).then(function(res){console.log(res);}).catch(function(err){console.err(err);});case 5:dispatch({type:ACTIONS.DELETE_TRANSACTION,payload:id});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](2);dispatch({type:ACTIONS.ERROR_TRANSACTION,payload:_context2.t0.res});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[2,8]]);}));return _deleteTransaction.apply(this,arguments);}function addTransaction(_x3){return _addTransaction.apply(this,arguments);}function _addTransaction(){_addTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(transactionItem){var userId;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:userId=localStorage.getItem(\"id\");_context3.prev=1;_context3.next=4;return axios.post(\"https://expensetrackerbytim.herokuapp.com/expensetracker/addtransaction/\".concat(userId),{transaction:{id:transactionItem.id,transactionAmount:transactionItem.transactionAmount,transactionType:transactionItem.transactionType,date:transactionItem.date,source:transactionItem.source}},{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){console.log(res);}).catch(function(err){console.error(err);});case 4:dispatch({type:ACTIONS.ADD_TRANSACTION,payload:transactionItem});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](1);dispatch({type:ACTIONS.ERROR_TRANSACTION,payload:_context3.t0.res});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[1,7]]);}));return _addTransaction.apply(this,arguments);}return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{transactions:state.transactions,deleteTransaction:deleteTransaction,addTransaction:addTransaction,getTransactions:getTransactions,error:state.error,loading:state.loading},children:children});};","map":{"version":3,"sources":["/Users/timtaylor/Documents/expense-tracker-app-main/client/src/context/GlobalState.js"],"names":["React","createContext","useReducer","reducer","axios","initialState","transactions","error","loading","ACTIONS","DELETE_TRANSACTION","ADD_TRANSACTION","GET_TRANSACTION","ERROR_TRANSACTION","GlobalContext","GlobalProvider","children","state","dispatch","getTransactions","id","get","res","type","payload","data","transaction","deleteTransaction","transactionDetails","userId","localStorage","getItem","delete","headers","transactionAmount","transactionType","date","source","then","console","log","catch","err","addTransaction","transactionItem","post"],"mappings":"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","sourcesContent":["import React, { createContext, useReducer } from \"react\";\nimport { reducer } from \"./AppReducer\";\nimport axios from \"axios\";\n\n//Initial State\nconst initialState = {\n  transactions: [],\n  error: null,\n  loading: true,\n};\n\nexport const ACTIONS = {\n  DELETE_TRANSACTION: \"delete_transaction\",\n  ADD_TRANSACTION: \"add_transaction\",\n  GET_TRANSACTION: \"get_transaction\",\n  ERROR_TRANSACTION: \"error_transaction\",\n};\n\n//Create  context\nexport const GlobalContext = createContext(initialState);\n\n//Provider component\nexport const GlobalProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  //Actions\n\n  async function getTransactions(id) {\n    try {\n      const res = await axios.get(\n        `https://expensetrackerbytim.herokuapp.com/expensetracker/${id}`\n      );\n\n      dispatch({\n        type: ACTIONS.GET_TRANSACTION,\n        payload: res.data.transaction,\n      });\n    } catch (err) {\n      dispatch({\n        type: ACTIONS.ERROR_TRANSACTION,\n        payload: err.res,\n      });\n    }\n  }\n\n  async function deleteTransaction(transactionDetails) {\n    const userId = localStorage.getItem(\"id\");\n    const id = transactionDetails.id;\n    try {\n      await axios\n        .delete(\n          `https://expensetrackerbytim.herokuapp.com/expensetracker/deletetransaction/${userId}`,\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            data: {\n              transaction: {\n                id: transactionDetails.id,\n                transactionAmount: `${transactionDetails.transactionAmount}`,\n                transactionType: `${transactionDetails.transactionType}`,\n                date: `${transactionDetails.date}`,\n                source: `${transactionDetails.source}`,\n              },\n            },\n          }\n        )\n        .then((res) => {\n          console.log(res);\n        })\n        .catch((err) => {\n          console.err(err);\n        });\n      dispatch({\n        type: ACTIONS.DELETE_TRANSACTION,\n        payload: id,\n      });\n    } catch (err) {\n      dispatch({\n        type: ACTIONS.ERROR_TRANSACTION,\n        payload: err.res,\n      });\n    }\n  }\n\n  async function addTransaction(transactionItem) {\n    const userId = localStorage.getItem(\"id\");\n    try {\n      await axios\n        .post(\n          `https://expensetrackerbytim.herokuapp.com/expensetracker/addtransaction/${userId}`,\n          {\n            transaction: {\n              id: transactionItem.id,\n              transactionAmount: transactionItem.transactionAmount,\n              transactionType: transactionItem.transactionType,\n              date: transactionItem.date,\n              source: transactionItem.source,\n            },\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        )\n        .then((res) => {\n          console.log(res);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n      dispatch({\n        type: ACTIONS.ADD_TRANSACTION,\n        payload: transactionItem,\n      });\n    } catch (err) {\n      dispatch({\n        type: ACTIONS.ERROR_TRANSACTION,\n        payload: err.res,\n      });\n    }\n  }\n\n  return (\n    <GlobalContext.Provider\n      value={{\n        transactions: state.transactions,\n        deleteTransaction,\n        addTransaction,\n        getTransactions,\n        error: state.error,\n        loading: state.loading,\n      }}\n    >\n      {children}\n    </GlobalContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}